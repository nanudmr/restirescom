!function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){function n(n,i){var o,r;this.element=n,this.options=t.extend(!0,{},a,i),this.options.moment&&(e=this.options.moment),this.validateOptions(),this.constraints={next:!0,today:!0,previous:!0,nextYear:!0,previousYear:!0},this.options.events.length&&(this.options.multiDayEvents?this.options.events=this.addMultiDayMomentObjectsToEvents(this.options.events):this.options.events=this.addMomentObjectToEvents(this.options.events)),this.options.lengthOfTime.months||this.options.lengthOfTime.days?this.options.lengthOfTime.months?(this.options.lengthOfTime.days=null,this.options.lengthOfTime.startDate?this.intervalStart=e(this.options.lengthOfTime.startDate).startOf("month"):this.options.startWithMonth?this.intervalStart=e(this.options.startWithMonth).startOf("month"):this.intervalStart=e().startOf("month"),this.intervalEnd=e(this.intervalStart).add(this.options.lengthOfTime.months,"months").subtract(1,"days"),this.month=this.intervalStart.clone()):this.options.lengthOfTime.days&&(this.options.lengthOfTime.startDate?this.intervalStart=e(this.options.lengthOfTime.startDate).startOf("day"):this.intervalStart=e().weekday(this.options.weekOffset).startOf("day"),this.intervalEnd=e(this.intervalStart).add(this.options.lengthOfTime.days-1,"days").endOf("day"),this.month=this.intervalStart.clone()):(this.month=e().startOf("month"),this.intervalStart=e(this.month),this.intervalEnd=e(this.month).endOf("month")),this.options.startWithMonth&&(this.month=e(this.options.startWithMonth).startOf("month"),this.intervalStart=e(this.month),this.intervalEnd=this.options.lengthOfTime.days?e(this.month).add(this.options.lengthOfTime.days-1,"days").endOf("day"):e(this.month).endOf("month")),this.options.constraints&&(this.options.constraints.startDate&&(r=e(this.options.constraints.startDate),this.options.lengthOfTime.days?(this.intervalStart.isBefore(r,"week")&&(this.intervalStart=r.startOf("week")),(this.intervalStart.diff(this.intervalEnd,"days")<this.options.lengthOfTime.days||this.intervalEnd.isBefore(this.intervalStart))&&(this.intervalEnd=e(this.intervalStart).add(this.options.lengthOfTime.days-1,"days").endOf("day"),this.month=this.intervalStart.clone())):(this.intervalStart.isBefore(r,"month")&&(this.intervalStart.set("month",r.month()).set("year",r.year()),this.month.set("month",r.month()).set("year",r.year())),this.intervalEnd.isBefore(r,"month")&&this.intervalEnd.set("month",r.month()).set("year",r.year()))),this.options.constraints.endDate&&(o=e(this.options.constraints.endDate),this.options.lengthOfTime.days?this.intervalStart.isAfter(o,"week")&&(this.intervalStart=e(o).endOf("week").subtract(this.options.lengthOfTime.days-1,"days").startOf("day"),this.intervalEnd=e(o).endOf("week"),this.month=this.intervalStart.clone()):(this.intervalEnd.isAfter(o,"month")&&(this.intervalEnd.set("month",o.month()).set("year",o.year()),this.month.set("month",o.month()).set("year",o.year())),this.intervalStart.isAfter(o,"month")&&this.intervalStart.set("month",o.month()).set("year",o.year())))),this._defaults=a,this._name=s,this.init()}var s="clndr",a={events:[],ready:null,extras:null,render:null,moment:null,weekOffset:0,constraints:null,forceSixRows:null,selectedDate:null,doneRendering:null,daysOfTheWeek:null,multiDayEvents:null,startWithMonth:null,dateParameter:"date",template:"<div class='clndr-controls'><div class='clndr-control-button'><span class='clndr-previous-button'>previous</span></div><div class='month'><%= month %> <%= year %></div><div class='clndr-control-button rightalign'><span class='clndr-next-button'>next</span></div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %></tbody></table>",showAdjacentMonths:!0,trackSelectedDate:!1,formatWeekdayHeader:null,adjacentDaysChangeMonth:!1,ignoreInactiveDaysInSelection:null,lengthOfTime:{days:null,interval:1,months:null},clickEvents:{click:null,today:null,nextYear:null,nextMonth:null,nextInterval:null,previousYear:null,onYearChange:null,previousMonth:null,onMonthChange:null,previousInterval:null,onIntervalChange:null},targets:{day:"day",empty:"empty",nextButton:"clndr-next-button",todayButton:"clndr-today-button",previousButton:"clndr-previous-button",nextYearButton:"clndr-next-year-button",previousYearButton:"clndr-previous-year-button"},classes:{past:"past",today:"today",event:"event",inactive:"inactive",selected:"selected",lastMonth:"last-month",nextMonth:"next-month",adjacentMonth:"adjacent-month"}};n.prototype.init=function(){var n,s;if(this.daysOfTheWeek=this.options.daysOfTheWeek||[],s=this.options.formatWeekdayHeader||s,!this.options.daysOfTheWeek)for(this.daysOfTheWeek=[],s=this.options.formatWeekdayHeader||function(t){return t.format("dd").charAt(0)},n=0;n<7;n++)this.daysOfTheWeek.push(s(e().weekday(n)));if(this.options.weekOffset&&(this.daysOfTheWeek=this.shiftWeekdayLabels(this.options.weekOffset)),!t.isFunction(this.options.render)){if(this.options.render=null,"undefined"==typeof _)throw new Error("Underscore was not found. Please include underscore.js OR provide a custom render function.");this.compiledClndrTemplate=_.template(this.options.template)}t(this.element).html("<div class='clndr'></div>"),this.calendarContainer=t(".clndr",this.element),this.bindEvents(),this.render(),this.options.ready&&this.options.ready.apply(this,[])},n.prototype.validateOptions=function(){(this.options.weekOffset>6||this.options.weekOffset<0)&&(console.warn("clndr.js: An invalid offset "+this.options.weekOffset+" was provided (must be 0 - 6); using 0 instead."),this.options.weekOffset=0)},n.prototype.shiftWeekdayLabels=function(t){var e,n=this.daysOfTheWeek;for(e=0;e<t;e++)n.push(n.shift());return n},n.prototype.createDaysObject=function(n,s){var a,i,o,r,h,l,d,c,v=[],p=n.clone();s.diff(n,"days");if(this._currentIntervalStart=n.clone(),this.eventsLastMonth=[],this.eventsNextMonth=[],this.eventsThisInterval=[],this.options.events.length&&(this.eventsThisInterval=t(this.options.events).filter(function(){var t=this._clndrStartDateObject.isAfter(s);return!this._clndrEndDateObject.isBefore(n)&&!t}).toArray(),this.options.showAdjacentMonths&&(c=n.clone().subtract(1,"months").startOf("month"),l=c.clone().endOf("month"),d=s.clone().add(1,"months").startOf("month"),h=d.clone().endOf("month"),this.eventsLastMonth=t(this.options.events).filter(function(){var t=this._clndrEndDateObject.isBefore(c),e=this._clndrStartDateObject.isAfter(l);return!(t||e)}).toArray(),this.eventsNextMonth=t(this.options.events).filter(function(){var t=this._clndrEndDateObject.isBefore(d),e=this._clndrStartDateObject.isAfter(h);return!(t||e)}).toArray())),!this.options.lengthOfTime.days)if(o=p.weekday()-this.options.weekOffset,o<0&&(o+=7),this.options.showAdjacentMonths)for(a=1;a<=o;a++)i=e([n.year(),n.month(),a]).subtract(o,"days"),v.push(this.createDayObject(i,this.eventsLastMonth));else for(a=0;a<o;a++)v.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.lastMonth}));for(r=n.clone();r.isBefore(s)||r.isSame(s,"day");)v.push(this.createDayObject(r.clone(),this.eventsThisInterval)),r.add(1,"days");if(!this.options.lengthOfTime.days)for(;v.length%7!=0;)this.options.showAdjacentMonths?v.push(this.createDayObject(r.clone(),this.eventsNextMonth)):v.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.nextMonth})),r.add(1,"days");if(this.options.forceSixRows&&42!==v.length)for(;v.length<42;)this.options.showAdjacentMonths?(v.push(this.createDayObject(r.clone(),this.eventsNextMonth)),r.add(1,"days")):v.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.nextMonth}));return v},n.prototype.createDayObject=function(t,n){var s,a,i,o,r,h,l=0,d=e(),c=[],v="",p={isToday:!1,isInactive:!1,isAdjacentMonth:!1};for(!t.isValid()&&t.hasOwnProperty("_d")&&void 0!==t._d&&(t=e(t._d)),i=t.clone().endOf("day"),l;l<n.length;l++)a=n[l]._clndrStartDateObject,s=n[l]._clndrEndDateObject,a<=i&&t<=s&&c.push(n[l]);return d.format("YYYY-MM-DD")===t.format("YYYY-MM-DD")&&(v+=" "+this.options.classes.today,p.isToday=!0),t.isBefore(d,"day")&&(v+=" "+this.options.classes.past),c.length&&(v+=" "+this.options.classes.event),this.options.lengthOfTime.days||(this._currentIntervalStart.month()>t.month()?(v+=" "+this.options.classes.adjacentMonth,p.isAdjacentMonth=!0,this._currentIntervalStart.year()===t.year()?v+=" "+this.options.classes.lastMonth:v+=" "+this.options.classes.nextMonth):this._currentIntervalStart.month()<t.month()&&(v+=" "+this.options.classes.adjacentMonth,p.isAdjacentMonth=!0,this._currentIntervalStart.year()===t.year()?v+=" "+this.options.classes.nextMonth:v+=" "+this.options.classes.lastMonth)),this.options.constraints&&(o=e(this.options.constraints.endDate),r=e(this.options.constraints.startDate),this.options.constraints.startDate&&t.isBefore(r)&&(v+=" "+this.options.classes.inactive,p.isInactive=!0),this.options.constraints.endDate&&t.isAfter(o)&&(v+=" "+this.options.classes.inactive,p.isInactive=!0)),!t.isValid()&&t.hasOwnProperty("_d")&&void 0!==t._d&&(t=e(t._d)),h=e(this.options.selectedDate),this.options.selectedDate&&t.isSame(h,"day")&&(v+=" "+this.options.classes.selected),v+=" calendar-day-"+t.format("YYYY-MM-DD"),v+=" calendar-dow-"+t.weekday(),this.calendarDay({date:t,day:t.date(),events:c,properties:p,classes:this.options.targets.day+v})},n.prototype.render=function(){var t,n,s,a,i,o,r,h,l={},d=null,c=null,v=this.intervalEnd.clone().add(1,"years"),p=this.intervalStart.clone().subtract(1,"years");if(this.calendarContainer.empty(),this.options.lengthOfTime.days)n=this.createDaysObject(this.intervalStart.clone(),this.intervalEnd.clone()),l={days:n,months:[],year:null,month:null,eventsLastMonth:[],eventsNextMonth:[],eventsThisMonth:[],extras:this.options.extras,daysOfTheWeek:this.daysOfTheWeek,intervalEnd:this.intervalEnd.clone(),numberOfRows:Math.ceil(n.length/7),intervalStart:this.intervalStart.clone(),eventsThisInterval:this.eventsThisInterval};else if(this.options.lengthOfTime.months){for(s=[],i=0,o=[],t=0;t<this.options.lengthOfTime.months;t++)h=this.intervalStart.clone().add(t,"months"),r=h.clone().endOf("month"),n=this.createDaysObject(h,r),o.push(this.eventsThisInterval),s.push({days:n,month:h});for(t=0;t<s.length;t++)i+=Math.ceil(s[t].days.length/7);l={days:[],year:null,month:null,months:s,eventsThisMonth:[],numberOfRows:i,extras:this.options.extras,intervalEnd:this.intervalEnd,intervalStart:this.intervalStart,daysOfTheWeek:this.daysOfTheWeek,eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,eventsThisInterval:o}}else n=this.createDaysObject(this.month.clone().startOf("month"),this.month.clone().endOf("month")),l={days:n,months:[],intervalEnd:null,intervalStart:null,year:this.month.year(),eventsThisInterval:null,extras:this.options.extras,month:this.month.format("MMMM"),daysOfTheWeek:this.daysOfTheWeek,eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,numberOfRows:Math.ceil(n.length/7),eventsThisMonth:this.eventsThisInterval};if(this.options.render?this.calendarContainer.html(this.options.render.apply(this,[l])):this.calendarContainer.html(this.compiledClndrTemplate(l)),this.options.constraints){for(a in this.options.targets)"day"!==a&&this.element.find("."+this.options.targets[a]).toggleClass(this.options.classes.inactive,!1);for(t in this.constraints)this.constraints[t]=!0;this.options.constraints.startDate&&(c=e(this.options.constraints.startDate)),this.options.constraints.endDate&&(d=e(this.options.constraints.endDate)),c&&(c.isAfter(this.intervalStart)||c.isSame(this.intervalStart,"day"))&&(this.element.find("."+this.options.targets.previousButton).toggleClass(this.options.classes.inactive,!0),this.constraints.previous=!this.constraints.previous),d&&(d.isBefore(this.intervalEnd)||d.isSame(this.intervalEnd,"day"))&&(this.element.find("."+this.options.targets.nextButton).toggleClass(this.options.classes.inactive,!0),this.constraints.next=!this.constraints.next),c&&c.isAfter(p)&&(this.element.find("."+this.options.targets.previousYearButton).toggleClass(this.options.classes.inactive,!0),this.constraints.previousYear=!this.constraints.previousYear),d&&d.isBefore(v)&&(this.element.find("."+this.options.targets.nextYearButton).toggleClass(this.options.classes.inactive,!0),this.constraints.nextYear=!this.constraints.nextYear),(c&&c.isAfter(e(),"month")||d&&d.isBefore(e(),"month"))&&(this.element.find("."+this.options.targets.today).toggleClass(this.options.classes.inactive,!0),this.constraints.today=!this.constraints.today)}this.options.doneRendering&&this.options.doneRendering.apply(this,[])},n.prototype.bindEvents=function(){var e={},n=this,s=t(this.element),a=this.options.targets,i=n.options.classes,o=!0===this.options.useTouchEvents?"touchstart":"click",r=o+".clndr";s.off(r,"."+a.day).off(r,"."+a.empty).off(r,"."+a.nextButton).off(r,"."+a.todayButton).off(r,"."+a.previousButton).off(r,"."+a.nextYearButton).off(r,"."+a.previousYearButton),s.on(r,"."+a.day,function(e){var a,o=t(e.currentTarget),r=function(){if(n.options.adjacentDaysChangeMonth){if(o.is("."+i.lastMonth))return n.backActionWithContext(n),!0;if(o.is("."+i.nextMonth))return n.forwardActionWithContext(n),!0}};!n.options.trackSelectedDate||n.options.ignoreInactiveDaysInSelection&&o.hasClass(i.inactive)?r():!0!==r()&&(n.options.selectedDate=n.getTargetDateString(e.currentTarget),s.find("."+i.selected).removeClass(i.selected),o.addClass(i.selected)),n.options.clickEvents.click&&(a=n.buildTargetObject(e.currentTarget,!0),n.options.clickEvents.click.apply(n,[a]))}),s.on(r,"."+a.empty,function(e){var s,a=t(e.currentTarget);n.options.clickEvents.click&&(s=n.buildTargetObject(e.currentTarget,!1),n.options.clickEvents.click.apply(n,[s])),n.options.adjacentDaysChangeMonth&&(a.is("."+i.lastMonth)?n.backActionWithContext(n):a.is("."+i.nextMonth)&&n.forwardActionWithContext(n))}),e={context:this},s.on(r,"."+a.todayButton,e,this.todayAction).on(r,"."+a.nextButton,e,this.forwardAction).on(r,"."+a.previousButton,e,this.backAction).on(r,"."+a.nextYearButton,e,this.nextYearAction).on(r,"."+a.previousYearButton,e,this.previousYearAction)},n.prototype.buildTargetObject=function(n,s){var a,i,o,r={date:null,events:[],element:n};return s&&(i=this.getTargetDateString(n),r.date=i?e(i):null,this.options.events&&(this.options.multiDayEvents?(o=r.date.clone().endOf("day"),a=function(){return this._clndrStartDateObject<=o&&r.date<=this._clndrEndDateObject}):a=function(){return i===this._clndrStartDateObject.format("YYYY-MM-DD")},r.events=t.makeArray(t(this.options.events).filter(a)))),r},n.prototype.getTargetDateString=function(t){var e=t.className.indexOf("calendar-day-");return-1!==e?t.className.substring(e+13,e+23):null},n.prototype.triggerEvents=function(t,n){var s,a,i,o,r,h,l,d,c,v=[e(t.month)],p=t.options.lengthOfTime,y=t.options.clickEvents,f={end:t.intervalEnd,start:t.intervalStart},u=[e(t.intervalStart),e(t.intervalEnd)];i=f.start.isAfter(n.start)&&(1===Math.abs(f.start.month()-n.start.month())||11===n.start.month()&&0===f.start.month()),o=f.start.isBefore(n.start)&&(1===Math.abs(n.start.month()-f.start.month())||0===n.start.month()&&11===f.start.month()),h=f.start.month()!==n.start.month()||f.start.year()!==n.start.year(),s=f.start.year()-n.start.year()==1||f.end.year()-n.end.year()==1,a=n.start.year()-f.start.year()==1||n.end.year()-f.end.year()==1,r=f.start.year()!==n.start.year(),p.days||p.months?(l=f.start.isAfter(n.start),d=f.start.isBefore(n.start),c=l||d,l&&y.nextInterval&&y.nextInterval.apply(t,u),d&&y.previousInterval&&y.previousInterval.apply(t,u),c&&y.onIntervalChange&&y.onIntervalChange.apply(t,u)):(i&&y.nextMonth&&y.nextMonth.apply(t,v),o&&y.previousMonth&&y.previousMonth.apply(t,v),h&&y.onMonthChange&&y.onMonthChange.apply(t,v),s&&y.nextYear&&y.nextYear.apply(t,v),a&&y.previousYear&&y.previousYear.apply(t,v),r&&y.onYearChange&&y.onYearChange.apply(t,v))},n.prototype.back=function(e){var n=arguments[1]||this,s=n.options.lengthOfTime,a={withCallbacks:!1},i={end:n.intervalEnd.clone(),start:n.intervalStart.clone()};return e=t.extend(!0,{},a,e),n.constraints.previous?(s.days?(n.intervalStart.subtract(s.interval,"days").startOf("day"),n.intervalEnd=n.intervalStart.clone().add(s.days-1,"days").endOf("day"),n.month=n.intervalStart.clone()):(n.intervalStart.subtract(s.interval,"months").startOf("month"),n.intervalEnd=n.intervalStart.clone().add(s.months||s.interval,"months").subtract(1,"days").endOf("month"),n.month=n.intervalStart.clone()),n.render(),e.withCallbacks&&n.triggerEvents(n,i),n):n},n.prototype.backAction=function(t){var e=t.data.context;e.backActionWithContext(e)},n.prototype.backActionWithContext=function(t){t.back({withCallbacks:!0},t)},n.prototype.previous=function(t){return this.back(t)},n.prototype.forward=function(e){var n=arguments[1]||this,s=n.options.lengthOfTime,a={withCallbacks:!1},i={end:n.intervalEnd.clone(),start:n.intervalStart.clone()};return e=t.extend(!0,{},a,e),n.constraints.next?(n.options.lengthOfTime.days?(n.intervalStart.add(s.interval,"days").startOf("day"),n.intervalEnd=n.intervalStart.clone().add(s.days-1,"days").endOf("day"),n.month=n.intervalStart.clone()):(n.intervalStart.add(s.interval,"months").startOf("month"),n.intervalEnd=n.intervalStart.clone().add(s.months||s.interval,"months").subtract(1,"days").endOf("month"),n.month=n.intervalStart.clone()),n.render(),e.withCallbacks&&n.triggerEvents(n,i),n):n},n.prototype.forwardAction=function(t){var e=t.data.context;e.forwardActionWithContext(e)},n.prototype.forwardActionWithContext=function(t){t.forward({withCallbacks:!0},t)},n.prototype.next=function(t){return this.forward(t)},n.prototype.previousYear=function(e){var n=arguments[1]||this,s={withCallbacks:!1},a={end:n.intervalEnd.clone(),start:n.intervalStart.clone()};return e=t.extend(!0,{},s,e),n.constraints.previousYear?(n.month.subtract(1,"year"),n.intervalStart.subtract(1,"year"),n.intervalEnd.subtract(1,"year"),n.render(),e.withCallbacks&&n.triggerEvents(n,a),n):n},n.prototype.previousYearAction=function(t){t.data.context.previousYear({withCallbacks:!0},t.data.context)},n.prototype.nextYear=function(e){var n=arguments[1]||this,s={withCallbacks:!1},a={end:n.intervalEnd.clone(),start:n.intervalStart.clone()};return e=t.extend(!0,{},s,e),n.constraints.nextYear?(n.month.add(1,"year"),n.intervalStart.add(1,"year"),n.intervalEnd.add(1,"year"),n.render(),e.withCallbacks&&n.triggerEvents(n,a),n):n},n.prototype.nextYearAction=function(t){t.data.context.nextYear({withCallbacks:!0},t.data.context)},n.prototype.today=function(n){var s=arguments[1]||this,a=s.options.lengthOfTime,i={withCallbacks:!1},o={end:s.intervalEnd.clone(),start:s.intervalStart.clone()};n=t.extend(!0,{},i,n),s.month=e().startOf("month"),a.days?(a.startDate?s.intervalStart=e().weekday(a.startDate.weekday()).startOf("day"):s.intervalStart=e().weekday(0).startOf("day"),s.intervalEnd=s.intervalStart.clone().add(a.days-1,"days").endOf("day")):(s.intervalStart=e().startOf("month"),s.intervalEnd=s.intervalStart.clone().add(a.months||a.interval,"months").subtract(1,"days").endOf("month")),s.intervalStart.isSame(o.start)&&s.intervalEnd.isSame(o.end)||s.render(),n.withCallbacks&&(s.options.clickEvents.today&&s.options.clickEvents.today.apply(s,[e(s.month)]),s.triggerEvents(s,o))},n.prototype.todayAction=function(t){t.data.context.today({withCallbacks:!0},t.data.context)},n.prototype.setMonth=function(t,e){var n=this.options.lengthOfTime,s={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return n.days||n.months?(console.warn("clndr.js: You are using a custom date interval. Use Clndr.setIntervalStart(startDate) instead."),this):(this.month.month(t),this.intervalStart=this.month.clone().startOf("month"),this.intervalEnd=this.intervalStart.clone().endOf("month"),this.render(),e&&e.withCallbacks&&this.triggerEvents(this,s),this)},n.prototype.setYear=function(t,e){var n={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return this.month.year(t),this.intervalEnd.year(t),this.intervalStart.year(t),this.render(),e&&e.withCallbacks&&this.triggerEvents(this,n),this},n.prototype.setIntervalStart=function(t,n){var s=this.options.lengthOfTime,a={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return s.days||s.months?(s.days?(this.intervalStart=e(t).startOf("day"),this.intervalEnd=this.intervalStart.clone().add(s.days-1,"days").endOf("day")):(this.intervalStart=e(t).startOf("month"),this.intervalEnd=this.intervalStart.clone().add(s.months||s.interval,"months").subtract(1,"days").endOf("month")),this.month=this.intervalStart.clone(),this.render(),n&&n.withCallbacks&&this.triggerEvents(this,a),this):(console.warn("clndr.js: You are using a custom date interval. Use Clndr.setIntervalStart(startDate) instead."),this)},n.prototype.setExtras=function(t){return this.options.extras=t,this.render(),this},n.prototype.setEvents=function(t){return this.options.multiDayEvents?this.options.events=this.addMultiDayMomentObjectsToEvents(t):this.options.events=this.addMomentObjectToEvents(t),this.render(),this},n.prototype.addEvents=function(e){var n=!(arguments.length>1)||arguments[1];return this.options.multiDayEvents?this.options.events=t.merge(this.options.events,this.addMultiDayMomentObjectsToEvents(e)):this.options.events=t.merge(this.options.events,this.addMomentObjectToEvents(e)),n&&this.render(),this},n.prototype.removeEvents=function(t){var e;for(e=this.options.events.length-1;e>=0;e--)!0===t(this.options.events[e])&&this.options.events.splice(e,1);return this.render(),this},n.prototype.addMomentObjectToEvents=function(t){var n=0,s=this;for(n;n<t.length;n++)t[n]._clndrStartDateObject=e(t[n][s.options.dateParameter]),t[n]._clndrEndDateObject=e(t[n][s.options.dateParameter]);return t},n.prototype.addMultiDayMomentObjectsToEvents=function(t){var n,s,a=0,i=this,o=i.options.multiDayEvents;for(a;a<t.length;a++)n=t[a][o.endDate],s=t[a][o.startDate],n||s?(t[a]._clndrEndDateObject=e(n||s),t[a]._clndrStartDateObject=e(s||n)):(t[a]._clndrEndDateObject=e(t[a][o.singleDay]),t[a]._clndrStartDateObject=e(t[a][o.singleDay]));return t},n.prototype.calendarDay=function(e){var n={day:"",date:null,events:[],classes:this.options.targets.empty};return t.extend({},n,e)},n.prototype.destroy=function(){var e=t(this.calendarContainer);e.parent().data("plugin_clndr",null),e.empty().remove(),this.options=a,this.element=null},t.fn.clndr=function(t){var e;if(this.length>1)throw new Error("CLNDR does not support multiple elements yet. Make sure your clndr selector returns only one element.");if(!this.length)throw new Error("CLNDR cannot be instantiated on an empty selector.");return this.data("plugin_clndr")?this.data("plugin_clndr"):(e=new n(this,t),this.data("plugin_clndr",e),e)}});